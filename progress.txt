# Ralph Progress Log
Started: Sun Feb  1 14:49:19 CET 2026
---

## Codebase Patterns
- Use Tailwind CSS v4 with @tailwindcss/postcss - CSS-first config via `@import "tailwindcss"` in globals.css
- Next.js 14 uses App Router - pages go in src/app/, layout in layout.tsx
- TypeScript types are in src/types/
- Questions data stored in data/questions.json
- Database utilities are in src/lib/ - use getDb() from src/lib/db.ts for database access
- Questions are loaded via getQuestions() from src/lib/questions.ts (cached in memory)
- API routes go in src/app/api/[route]/route.ts - export GET/POST handlers
- Client components need 'use client' directive at top when using React hooks
- Wrap components using useSearchParams in Suspense for Next.js static generation
- Use useSearchParams + useRouter for URL state management in client components
---

## 2026-02-01 - US-002
- Implemented Next.js 14.2.35 with App Router
- Configured Tailwind CSS v4 with @tailwindcss/postcss
- Created basic layout with navigation (Study | Dashboard links)
- Created home page with app title and call-to-action buttons
- Files changed:
  - package.json (added Next.js scripts and dependencies)
  - tsconfig.json (updated for Next.js JSX support)
  - next-env.d.ts (new - Next.js types)
  - next.config.mjs (new - Next.js config)
  - postcss.config.mjs (new - PostCSS with Tailwind)
  - src/app/globals.css (new - Tailwind import)
  - src/app/layout.tsx (new - root layout with navigation)
  - src/app/page.tsx (new - home page)
  - .gitignore (added .next and out)
- **Learnings for future iterations:**
  - Tailwind CSS v4 uses CSS-first configuration with `@import "tailwindcss"` - no tailwind.config.js needed
  - Use @tailwindcss/postcss instead of tailwindcss in postcss.config
  - Next.js 14 doesn't support .ts config files - use .mjs for next.config
  - Build passes and typecheck passes
---

## 2026-02-01 - US-003
- Added SQLite database with better-sqlite3
- Created database schema with sessions and attempts tables
- Created database connection utility (src/lib/db.ts)
- Created questions loader utility (src/lib/questions.ts) with caching
- Added database types (src/types/database.ts)
- Files changed:
  - package.json (added better-sqlite3 dependency)
  - package-lock.json (updated)
  - .gitignore (added *.db, *.db-wal, *.db-shm)
  - src/lib/db.ts (new - database connection and schema)
  - src/lib/questions.ts (new - questions loader)
  - src/types/database.ts (new - database types)
- **Learnings for future iterations:**
  - Use getDb() from src/lib/db.ts - it initializes schema automatically on first call
  - Use getQuestions() from src/lib/questions.ts - it caches questions in memory
  - Database uses WAL mode for better concurrent read performance
  - Indexes created for question_id, session_id, and created_at on attempts table
---

## 2026-02-01 - US-004
- Created study page with sequential question browsing
- Added API endpoint to fetch all questions (GET /api/questions)
- Added API endpoint to record attempts (POST /api/attempts)
- Implemented interactive flashcard UI with answer selection and feedback
- Added progress indicator showing current position (e.g., "42 / 480")
- Files changed:
  - src/app/study/page.tsx (new - study page component)
  - src/app/api/questions/route.ts (new - questions API)
  - src/app/api/attempts/route.ts (new - attempts API)
- **Learnings for future iterations:**
  - API routes in Next.js 14 App Router go in src/app/api/[route]/route.ts
  - Use 'use client' directive for components with React hooks (useState, useEffect)
  - POST /api/attempts validates question exists and returns isCorrect + correctAnswer
  - Database correctly stores attempts with is_correct as 0 or 1
---

## 2026-02-01 - US-005
- Added section filter dropdown to study page
- Filter options: All sections + 4 specific sections (Radiotechnika, Przepisy, Bezpiecze≈Ñstwo, Procedury operatorskie)
- Questions filtered using useMemo based on selected section
- Selection persists in URL using ?section= query param
- Progress indicator updates to show filtered count (e.g., "1 / 330" for Radiotechnika)
- Files changed:
  - src/app/study/page.tsx (updated - added section filter with Suspense wrapper)
- **Learnings for future iterations:**
  - useSearchParams() requires Suspense wrapper for Next.js static generation
  - Use useRouter().push() with URLSearchParams for URL state management
  - useMemo for filtering based on URL params to avoid unnecessary re-renders
  - Reset related state (currentIndex, selectedAnswer) when filter changes via useEffect
---
